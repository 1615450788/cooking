#!/usr/bin/env node

var program = require('commander')
var logger = require('../util/logger')
var npm = require('../util/npm')

program
  .option('-r --registry [registry-url]', '指定镜像, 默认选用 taobao 镜像')
  .option('-t --template [template-name]', '更新脚手架')
  .parse(process.argv)

console.log()
process.on('exit', function () {
  console.log()
})

var name = program.args[0]

if (!name) {
  logger.fatal('请指定插件/脚手架名称')
}

if (program.template) {
  logger.log('更新脚手架: ' + name)
  name = 'slush-cooking-' + name
} else {
  logger.log('更新插件: ' + name)
  name = 'cooking-' + name
}

npm.update(name, program.registry)
logger.success('更新完成')
