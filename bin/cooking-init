#!/usr/bin/env node

var fs = require('fs-extra');
var cwd = require('cwd');
var utils = require('./../src/utils');
var CONTACTS = require('./../src/contacts');
var writeCookConfig = function(use) {
  fs.readFile(utils.dir('src/templates/cooking.conf.js'), function(err, context) {
    var newContext = context.toString().replace(/\${(use)}/g, use);
    fs.writeFile(cwd('cooking.conf.js'), newContext);
  });
};



module.exports = function(use) {
  var templatePath;
  var targetPath = cwd();

  use = use || CONTACTS.USEFUL.VUE;
  templatePath = utils.dir('src/templates/' + use + '/');

  if (!CONTACTS.USEFUL[use.toUpperCase()]) {
    return console.log('\nonly support vue, react and angular.\n');
  }

  fs.copy(templatePath, targetPath, function(err) {
    if (err) {
      console.error(err);
      return;
    }
    writeCookConfig(use);
    console.log('\nDone, enjoy it!\n');
  });
};
